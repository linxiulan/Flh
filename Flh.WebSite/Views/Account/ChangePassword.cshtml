@{
    Layout = "~/Views/Layout/_header.cshtml";
    ViewBag.Title = "修改密码";
}

<div class="flh-user layout-width">
    <div class="flh-usermain">
        <div id="flh-ResetPassword">
            <div class="flh-usermain-content">
                <div class="flh-usermain-list">
                    <div class="flh-usermain-list-nr">
                        <input class="flh-usermain-input indent20 v-Password" type="text" name="Password" placeholder="新密码" />
                        <label class="Password-error"></label>
                    </div>
                </div>
                <div class="flh-usermain-list">
                    <div class="flh-usermain-list-nr">
                        <input class="flh-usermain-input indent20 v-ResetPassword" type="text" name="ResetPassword" placeholder="确认密码" />
                        <label class="ResetPassword-error"></label>
                    </div>
                </div>
                <div class="flh-usermain-other">
                    <a class="other-submit fun-verificationSubmit" href="javascript:;">确定</a>
                </div>
            </div>
        </div>
        <div class="flh-user-boxbg"></div>
    </div>
</div>

<script>
    $(function () {
        //提交
        $('.fun-verificationSubmit').on('click', function () {
            var _this = $(this),
                _ancestor = $('#flh-ResetPassword'),
                nPassword = $.trim($('.v-Password', _ancestor).val()),
                rPassword = $.trim($('.v-ResetPassword', _ancestor).val());
            $('label', _ancestor).hide();
            if (nPassword == "") {
                $('.Password-error', _ancestor).html("请输入新密码").show();
            }
            if (rPassword == "" && nPassword != rPassword) {
                $('.ResetPassword-error', _ancestor).html("输入的密码不一致").show();
                return false;
            }

            if (nPassword != "" && rPassword != "" && _this.text() == "确定") {
                _this.text("确定中...").css("letter-spacing", "0px");
                $.ajax({
                    url: url,
                    type: type || "post",
                    data: data,
                    dataType: dataType || "json",
                    success: function (res) {
                        if (res.state.code == "0x00000000") {
                            window.location.href = "/account/login";
                        } else {
                            alert(res.message)
                        }
                        _this.text("确定").css("letter-spacing", "8px");
                    }
                })
            }
        })
    })
</script>
